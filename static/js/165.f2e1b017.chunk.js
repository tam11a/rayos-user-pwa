"use strict";(self.webpackChunkrayos_user_pwa=self.webpackChunkrayos_user_pwa||[]).push([[165],{2165:function(e,n,t){t.r(n),t.d(n,{default:function(){return X}});var i=t(885),r=t(9019),o=t(1113),d=t(2295),s=t(7216),l=t(2600),a=t(8119),u=t(3213),c=t(7131),x=t(5898),v=t(9536),h=t(5160),p=t(7313),f=t(860),m=t(9466),j=t(7890),Z=t(5883),g=t(371),b=t(7347),y=t(9860),w=t(4813),C=t(1917),P=t(8490),S=t(315),A=t(1263),k=t(7451),W=t(3039),_=t(9881),D=t(3249),I=t(816),Q=t.n(I),F=t(8821),R=t(6672),G=t(8711),M=t(2539),z=t(4972),E=t(6277),L=t(6417),U=function(e){var n,t,i,r,d,s,l=e.timelines,a=function(e){switch(e){case"Pending":return(0,L.jsx)(F.YZq,{});case"Confirmed":return(0,L.jsx)(R.AFA,{});case"Shipped":return(0,L.jsx)(M.tR_,{});case"Delivered":return(0,L.jsx)(z.MvH,{});case"Canceled":return(0,L.jsx)(M.B4e,{});case"Returned":return(0,L.jsx)(E.DJx,{});default:return(0,L.jsx)(G.DcD,{})}},u=function(e){switch(e){case"Confirmed":return"warning";case"Delivered":return"success";case"Canceled":case"Returned":return"error";case"Pending":return"info";default:return"black"}},c=(0,y.Z)(),x=(0,w.Z)(c.breakpoints.down("md"));return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(C.Z,{activeStep:x?0:l.length-1,alternativeLabel:!x,sx:{mb:2},orientation:x?"vertical":"horizontal",children:null===l||void 0===l||null===(n=l.sort)||void 0===n||null===(t=n.call(l,(function(e,n){return!x&&(e.createdAt>n.createdAt?1:e.createdAt<n.createdAt?-1:0)})))||void 0===t||null===(i=t.map)||void 0===i?void 0:i.call(t,(function(e){return(0,L.jsxs)(P.Z,{children:[(0,L.jsx)(S.Z,{icon:(0,L.jsx)(A.Z,{sx:{fontSize:"1.2em"},color:u(e.status),children:a(e.status)}),sx:{textAlign:{xs:"left",md:"center"}},optional:e._id===l[0]._id&&x?(0,L.jsx)(L.Fragment,{}):(0,L.jsx)(o.Z,{variant:"caption",children:Q()(e.createdAt).format("lll")}),children:e.status}),(0,L.jsx)(k.Z,{mdUp:!0,children:(0,L.jsx)(W.Z,{children:(0,L.jsxs)(_.Z,{icon:a(e.status),severity:u(e.status),children:[(0,L.jsx)(D.Z,{children:e.message}),Q()(e.createdAt).format("lll")]})})})]},e._id)}))}),(0,L.jsx)(k.Z,{mdDown:!0,children:null===l||void 0===l||null===(r=l.sort)||void 0===r||null===(d=r.call(l,(function(e,n){return n.createdAt>e.createdAt?1:n.createdAt<e.createdAt?-1:0})))||void 0===d||null===(s=d.map)||void 0===s?void 0:s.call(d,(function(e,n){return(0,L.jsxs)(_.Z,{icon:a(e.status),severity:u(e.status),sx:{fontWeight:!n&&"600"},children:[(0,L.jsx)(D.Z,{sx:{fontWeight:!n&&"600"},children:e.message}),Q()(e.createdAt).format("lll")]},e._id)}))})]})},T=t(4165),q=t(5861),O=t(6149),Y=t(6467),H=t(4832),B=t(4882),J=t(4193),N=t(1005),V=t(1146),K=function(e){var n=e.onCloseReview,t=e.orderId,r=e.orderLine,d=e.product,s=p.useContext(Z.Z),l=p.useState(5),a=(0,i.Z)(l,2),u=a[0],c=a[1],v=p.useState(""),h=(0,i.Z)(v,2),f=h[0],m=h[1],j=(0,N.Z)(),g=j.mutateAsync,b=j.isLoading,y=function(){var e=(0,q.Z)((0,T.Z)().mark((function e(){var i;return(0,T.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,V.E)((function(){return g({order:t,orderline:r,product:d,rating:u,message:f})}),[201]);case 2:(i=e.sent).status?(s.createSnack(i.message,"success"),n()):s.createSnack(i.message,"error");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,L.jsx)(O.Z,{open:!0,onClose:n,scroll:"body",PaperProps:{sx:{width:"95vw",maxWidth:"400px"}},children:(0,L.jsxs)(Y.Z,{children:[(0,L.jsx)(o.Z,{variant:"h6",sx:{fontWeight:"bold",textAlign:"center",mb:3},children:"How was your experience?"}),(0,L.jsx)(x.Z,{sx:{alignItems:"center",justifyContent:"center"},children:(0,L.jsx)(H.Z,{size:"large",value:u,onChange:function(e,n){c(n)}})}),(0,L.jsx)(B.ZP,{multiline:!0,sx:{border:"2px solid #ddd",mt:3,mb:2,borderRadius:"2px",px:1},fullWidth:!0,minRows:5,placeholder:"Give Your Feedback",value:f,onChange:function(e){m(e.target.value)}}),(0,L.jsx)(J.Z,{variant:"contained",fullWidth:!0,disabled:b||!f,onClick:y,children:"Submit"})]})})},X=function(){p.useContext(Z.Z);var e,n,t,y,w,C,P,S,A,k,W,_,D,I,Q,F,R,G,z,E=(0,j.UO)().oid,T=p.useState({limit:10,page:1,filters:[]}),q=(0,i.Z)(T,1)[0],O=(0,g.uy)(E,q),Y=O.data,H=O.isLoading,B=p.useState(void 0),J=(0,i.Z)(B,2),N=J[0],V=J[1],X=p.useState([]),$=(0,i.Z)(X,2),ee=$[0],ne=$[1];return p.useEffect((function(){var e,n;ne((null===Y||void 0===Y||null===(e=Y.data)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.products)||[])}),[H]),(0,L.jsxs)(L.Fragment,{children:[N&&(0,L.jsx)(K,{onCloseReview:function(){return V()},orderId:E,orderLine:null===N||void 0===N?void 0:N._id,product:null===N||void 0===N||null===(e=N.product)||void 0===e?void 0:e._id}),(0,L.jsx)(h.Z,{children:(0,L.jsxs)(r.ZP,{container:!0,sx:{mt:2},rowGap:2,columnGap:2,children:[(0,L.jsxs)(r.ZP,{item:!0,xs:12,children:[(0,L.jsx)(o.Z,{variant:"h6",sx:{mb:1,fontWeight:"bold"},children:"Order Track"}),(0,L.jsx)(d.Z,{elevation:0,sx:{border:{xs:"none",md:"2px solid #efefef"},p:{xs:0,md:2}},children:(0,L.jsx)(U,{timelines:(null===Y||void 0===Y||null===(n=Y.data)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.timeline)||[]})})]}),(0,L.jsxs)(r.ZP,{item:!0,xs:12,sx:{display:"flex",flexDirection:{xs:"column",md:"row"},rowGap:2,columnGap:3,justifyContent:{xs:"center",md:"space-between"},my:2},children:[(0,L.jsxs)(r.ZP,{item:!0,xs:12,md:7.55,children:[(0,L.jsx)(o.Z,{variant:"h6",sx:{mb:1,fontWeight:"bold"},children:"Ordered Items"}),(0,L.jsx)(d.Z,{elevation:0,sx:{boxShadow:{xs:0,md:5}},children:ee.map((function(e){var n,t,i,r,d,x,v,h,p,j,Z,g;return(0,L.jsxs)(s.ZP,{disablePadding:!0,sx:{px:1,pr:{xs:1,md:2},py:.5},children:[(0,L.jsx)(l.Z,{children:(0,L.jsx)(a.Z,{src:(0,b.FG)(null===e||void 0===e||null===(t=e.product)||void 0===t?void 0:t.image),sx:{borderRadius:1,height:"55px",width:"55px",background:"transparent",color:"primary.dark",mr:1},component:m.rU,to:"/product/".concat(null===e||void 0===e||null===(i=e.product)||void 0===i?void 0:i._id),children:(0,L.jsx)(f.xUA,{style:{fontSize:"1.8em"}})})}),(0,L.jsx)(u.Z,{sx:{flex:1},primary:(0,L.jsx)(L.Fragment,{children:(0,L.jsx)("b",{children:(null===e||void 0===e||null===(r=e.product)||void 0===r?void 0:r.titleEn)||"-"})}),secondary:(0,L.jsxs)(L.Fragment,{children:[null===e||void 0===e||null===(d=e.product)||void 0===d?void 0:d.variantType,":"," ",(0,L.jsx)("span",{style:{fontWeight:600},children:(null===e||void 0===e||null===(x=e.variant)||void 0===x?void 0:x.titleEn)||"-"})," ","\xd7"," ",(0,L.jsx)("span",{style:{fontWeight:600},children:(null===e||void 0===e||null===(v=e.product)||void 0===v?void 0:v.sellPrice)||0})," ","\u09f3 \xd7"," ",(0,L.jsx)("span",{style:{fontWeight:600},children:(null===e||void 0===e?void 0:e.quantity)||0})," "]}),primaryTypographyProps:{noWrap:!0,sx:{color:"black.main",textDecoration:"none"}},secondaryTypographyProps:{noWrap:!0,sx:{textDecoration:"none","& span":{color:"black.main"}}}}),(0,L.jsxs)(o.Z,{variant:"body1",color:"black",sx:{fontWeight:"bold",minWidth:"15px",textAlign:"center"},children:[(null===e||void 0===e?void 0:e.quantity)*(null===e||void 0===e||null===(h=e.product)||void 0===h?void 0:h.sellPrice)||0," ","\u09f3"]}),"Delivered"===(null===Y||void 0===Y||null===(p=Y.data)||void 0===p||null===(j=p.data)||void 0===j?void 0:j.status)||"Returned"===(null===Y||void 0===Y||null===(Z=Y.data)||void 0===Z||null===(g=Z.data)||void 0===g?void 0:g.status)?(0,L.jsx)(c.Z,{size:"small",sx:{ml:1},color:"black",disabled:!(null===e||void 0===e||!e.review),onClick:function(){return V(e)},children:(0,L.jsx)(M._YV,{})}):(0,L.jsx)(L.Fragment,{})]},null===e||void 0===e||null===(n=e.product)||void 0===n?void 0:n._id)}))})]}),(0,L.jsxs)(r.ZP,{item:!0,xs:12,md:4,children:[(0,L.jsx)(o.Z,{variant:"h6",sx:{mb:1,fontWeight:"bold"},children:"Shipping Information"}),(0,L.jsxs)(d.Z,{elevation:0,sx:{boxShadow:{xs:0,md:5},p:{xs:0,md:2}},children:[(0,L.jsxs)(x.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{width:"100%"},children:[(0,L.jsx)(o.Z,{variant:"button",children:"Payment Method :"}),(0,L.jsx)("b",{children:null===Y||void 0===Y||null===(y=Y.data)||void 0===y||null===(w=y.data)||void 0===w?void 0:w.paymentMethod})]}),(0,L.jsx)(v.Z,{sx:{my:2}}),(0,L.jsxs)(x.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{width:"100%"},children:[(0,L.jsx)(o.Z,{variant:"button",children:"Receiver Phone Number :"}),(0,L.jsx)("b",{children:(null===Y||void 0===Y||null===(C=Y.data)||void 0===C||null===(P=C.data)||void 0===P||null===(S=P.shipping)||void 0===S?void 0:S.phone)||"-"})]}),(0,L.jsxs)(x.Z,{direction:{xs:"row",md:"column"},alignItems:{xs:"center",md:"flex-start"},justifyContent:"space-between",sx:{width:"100%"},children:[(0,L.jsx)(o.Z,{variant:"button",children:"Shipping Address :"}),(0,L.jsx)("b",{children:(null===Y||void 0===Y||null===(A=Y.data)||void 0===A||null===(k=A.data)||void 0===k||null===(W=k.shipping)||void 0===W?void 0:W.address)||"-"})]})]}),(0,L.jsx)(o.Z,{variant:"h6",sx:{mt:3,mb:1,fontWeight:"bold"},children:"Additional Information"}),(0,L.jsxs)(d.Z,{elevation:0,sx:{p:{xs:0,md:2}},children:[(0,L.jsxs)(x.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{width:"100%"},children:[(0,L.jsx)(o.Z,{variant:"button",children:"Subtotal :"}),(0,L.jsxs)(o.Z,{children:[(null===Y||void 0===Y||null===(_=Y.data)||void 0===_||null===(D=_.data)||void 0===D?void 0:D.totalSellPrice)||0," \u09f3"]})]}),(0,L.jsxs)(x.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{width:"100%"},children:[(0,L.jsx)(o.Z,{variant:"button",children:"Delivery Fee :"}),(0,L.jsxs)(o.Z,{children:[(null===Y||void 0===Y||null===(I=Y.data)||void 0===I||null===(Q=I.data)||void 0===Q?void 0:Q.shippingFee)||0," \u09f3"]})]}),(0,L.jsxs)(x.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{width:"100%"},children:[(0,L.jsx)(o.Z,{variant:"button",children:"Discount :"}),(0,L.jsxs)(o.Z,{children:["- ",(null===Y||void 0===Y||null===(F=Y.data)||void 0===F||null===(R=F.data)||void 0===R?void 0:R.discount)||0," \u09f3"]})]}),(0,L.jsx)(v.Z,{sx:{my:1}}),(0,L.jsxs)(x.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{width:"100%",mb:2},children:[(0,L.jsx)(o.Z,{variant:"button",children:(0,L.jsx)("b",{children:"total :"})}),(0,L.jsxs)(o.Z,{children:[(0,L.jsx)("b",{children:(null===Y||void 0===Y||null===(G=Y.data)||void 0===G||null===(z=G.data)||void 0===z?void 0:z.total)||0})," \u09f3"]})]})]})]})]})]})})]})}},371:function(e,n,t){t.d(n,{QE:function(){return a},UD:function(){return s},uy:function(){return x},v8:function(){return o},wS:function(){return c}});var i=t(56),r=t(7347),o=function(e){return(0,i.useQuery)(["get-all-order-for-user",e],(function(){return function(e){return r.ZP.get("order/user?".concat(e.method&&"all"!==e.method?"status=".concat(e.method,"&"):"","limit=").concat(e.limit,"&page=").concat(e.page))}(e)}),{})},d=function(e){return r.ZP.post("order/calculate",e)},s=function(){var e=(0,i.useQueryClient)();return(0,i.useMutation)(d,{onSuccess:function(){return e.invalidateQueries("get-order-calculate")}})},l=function(e){return r.ZP.post("order/create",e)},a=function(){var e=(0,i.useQueryClient)();return(0,i.useMutation)(l,{onSuccess:function(){e.invalidateQueries("get-cart-by-user")}})},u=function(){return r.ZP.get("order/calculate")},c=function(){return(0,i.useQuery)(["get-order-calculate"],u,{retry:1})},x=function(e){return(0,i.useQuery)(["get-products-by-order-id",e],(function(){return function(e){return r.ZP.get("order/".concat(e))}(e)}),{})}},1005:function(e,n,t){t.d(n,{A:function(){return o},Z:function(){return s}});var i=t(56),r=t(7347),o=function(e){return(0,i.useQuery)(["get-review-by-prod-id",e],(function(){return function(e){return r.ZP.get("review/product/".concat(e))}(e)}),{enabled:!!e,retry:1})},d=function(e){return r.ZP.post("review",e)},s=function(){var e=(0,i.useQueryClient)();return(0,i.useMutation)(d,{onSuccess:function(){e.invalidateQueries("get-all-order"),e.invalidateQueries("get-user-orderlist-by-id"),e.invalidateQueries("get-products-by-order-id")}})}}}]);