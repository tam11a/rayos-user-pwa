"use strict";(self.webpackChunkrayos_user_pwa=self.webpackChunkrayos_user_pwa||[]).push([[79],{9079:function(e,n,t){t.r(n),t.d(n,{default:function(){return q}});var i=t(885),r=t(9019),l=t(1113),d=t(2295),s=t(7216),o=t(2600),a=t(8119),c=t(3213),u=t(7131),x=t(5898),v=t(9536),h=t(5160),j=t(7313),m=t(7890),p=t(5883),f=t(371),Z=t(7347),g=t(9860),b=t(4813),y=t(1917),w=t(8490),P=t(315),C=t(1263),A=t(7451),S=t(3039),k=t(9881),D=t(3249),W=t(816),I=t.n(W),_=t(8821),F=t(6672),Q=t(8711),R=t(2539),G=t(4972),M=t(6277),E=t(6417),T=function(e){var n,t,i,r,d,s,o=e.timelines,a=function(e){switch(e){case"Pending":return(0,E.jsx)(_.YZq,{});case"Confirmed":return(0,E.jsx)(F.AFA,{});case"Shipped":return(0,E.jsx)(R.tR_,{});case"Delivered":return(0,E.jsx)(G.MvH,{});case"Canceled":return(0,E.jsx)(R.B4e,{});case"Returned":return(0,E.jsx)(M.DJx,{});default:return(0,E.jsx)(Q.DcD,{})}},c=function(e){switch(e){case"Confirmed":return"warning";case"Delivered":return"success";case"Canceled":case"Returned":return"error";case"Pending":return"info";default:return"black"}},u=(0,g.Z)(),x=(0,b.Z)(u.breakpoints.down("md"));return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(y.Z,{activeStep:x?0:o.length-1,alternativeLabel:!x,sx:{mb:2},orientation:x?"vertical":"horizontal",children:null===o||void 0===o||null===(n=o.sort)||void 0===n||null===(t=n.call(o,(function(e,n){return!x&&(e.createdAt>n.createdAt?1:e.createdAt<n.createdAt?-1:0)})))||void 0===t||null===(i=t.map)||void 0===i?void 0:i.call(t,(function(e){return(0,E.jsxs)(w.Z,{children:[(0,E.jsx)(P.Z,{icon:(0,E.jsx)(C.Z,{sx:{fontSize:"1.2em"},color:c(e.status),children:a(e.status)}),sx:{textAlign:{xs:"left",md:"center"}},optional:e._id===o[0]._id&&x?(0,E.jsx)(E.Fragment,{}):(0,E.jsx)(l.Z,{variant:"caption",children:I()(e.createdAt).format("lll")}),children:e.status}),(0,E.jsx)(A.Z,{mdUp:!0,children:(0,E.jsx)(S.Z,{children:(0,E.jsxs)(k.Z,{icon:a(e.status),severity:c(e.status),children:[(0,E.jsx)(D.Z,{children:e.message}),I()(e.createdAt).format("lll")]})})})]},e._id)}))}),(0,E.jsx)(A.Z,{mdDown:!0,children:null===o||void 0===o||null===(r=o.sort)||void 0===r||null===(d=r.call(o,(function(e,n){return n.createdAt>e.createdAt?1:n.createdAt<e.createdAt?-1:0})))||void 0===d||null===(s=d.map)||void 0===s?void 0:s.call(d,(function(e,n){return(0,E.jsxs)(k.Z,{icon:a(e.status),severity:c(e.status),sx:{fontWeight:!n&&"600"},children:[(0,E.jsx)(D.Z,{sx:{fontWeight:!n&&"600"},children:e.message}),I()(e.createdAt).format("lll")]},e._id)}))})]})},q=function(){j.useContext(p.Z);var e,n,t,g,b,y,w,P,C,A,S,k,D,W,I,_,F,Q,G,M,q,z=(0,m.UO)().oid,O=j.useState({limit:10,page:1,filters:[]}),U=(0,i.Z)(O,2),L=U[0],N=(U[1],(0,f.uy)(z,L)),Y=N.data,B=N.isLoading,H=j.useState([]),J=(0,i.Z)(H,2),V=J[0],K=J[1];return j.useEffect((function(){var e,n;K((null===Y||void 0===Y||null===(e=Y.data)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.products)||[])}),[B]),console.log(Y),(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(h.Z,{children:(0,E.jsxs)(r.ZP,{container:!0,sx:{mt:2},rowGap:2,columnGap:2,children:[(0,E.jsxs)(r.ZP,{item:!0,xs:12,children:[(0,E.jsx)(l.Z,{variant:"h6",sx:{mb:1,fontWeight:"bold"},children:"Order Track"}),(0,E.jsx)(d.Z,{elevation:0,sx:{boxShadow:{xs:0,md:5},p:{xs:0,md:2}},children:(0,E.jsx)(T,{timelines:(null===Y||void 0===Y||null===(e=Y.data)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.timeline)||[]})})]}),(0,E.jsxs)(r.ZP,{item:!0,xs:12,sx:{display:"flex",flexDirection:{xs:"column",md:"row"},rowGap:2,columnGap:3,justifyContent:{xs:"center",md:"space-between"},my:2},children:[(0,E.jsxs)(r.ZP,{item:!0,xs:12,md:7.55,children:[(0,E.jsx)(l.Z,{variant:"h6",sx:{mb:1,fontWeight:"bold"},children:"Ordered Items"}),(0,E.jsx)(d.Z,{elevation:0,sx:{boxShadow:{xs:0,md:5}},children:V.map((function(e){var n,t,i,r,d,x,v,h,j,m,p;return(0,E.jsxs)(s.ZP,{disablePadding:!0,sx:{px:1,pr:{xs:1,md:2},py:.5},children:[(0,E.jsx)(o.Z,{children:(0,E.jsx)(a.Z,{src:(0,Z.FG)(null===e||void 0===e||null===(t=e.product)||void 0===t?void 0:t.image),sx:{borderRadius:1,height:"55px",width:"55px",background:"transparent",color:"primary.dark",mr:1}})}),(0,E.jsx)(c.Z,{sx:{flex:1},primary:(0,E.jsx)(E.Fragment,{children:(0,E.jsx)("b",{children:(null===e||void 0===e||null===(i=e.product)||void 0===i?void 0:i.titleEn)||"-"})}),secondary:(0,E.jsxs)(E.Fragment,{children:[null===e||void 0===e||null===(r=e.product)||void 0===r?void 0:r.variantType,":"," ",(0,E.jsx)("span",{style:{fontWeight:600},children:(null===e||void 0===e||null===(d=e.variant)||void 0===d?void 0:d.titleEn)||"-"})," ","\xd7"," ",(0,E.jsx)("span",{style:{fontWeight:600},children:(null===e||void 0===e||null===(x=e.product)||void 0===x?void 0:x.sellPrice)||0})," ","\u09f3 \xd7"," ",(0,E.jsx)("span",{style:{fontWeight:600},children:(null===e||void 0===e?void 0:e.quantity)||0})," "]}),primaryTypographyProps:{noWrap:!0,sx:{color:"black.main",textDecoration:"none"}},secondaryTypographyProps:{noWrap:!0,sx:{textDecoration:"none","& span":{color:"black.main"}}}}),(0,E.jsxs)(l.Z,{variant:"body1",color:"black",sx:{fontWeight:"bold",minWidth:"15px",textAlign:"center"},children:[(null===e||void 0===e?void 0:e.quantity)*(null===e||void 0===e||null===(v=e.product)||void 0===v?void 0:v.sellPrice)||0," ","\u09f3"]}),"Delivered"===(null===Y||void 0===Y||null===(h=Y.data)||void 0===h||null===(j=h.data)||void 0===j?void 0:j.status)||"Returned"===(null===Y||void 0===Y||null===(m=Y.data)||void 0===m||null===(p=m.data)||void 0===p?void 0:p.status)?(0,E.jsx)(u.Z,{size:"small",sx:{ml:1},color:"black",disabled:!(null===e||void 0===e||!e.review),children:(0,E.jsx)(R._YV,{})}):(0,E.jsx)(E.Fragment,{})]},null===e||void 0===e||null===(n=e.product)||void 0===n?void 0:n._id)}))})]}),(0,E.jsxs)(r.ZP,{item:!0,xs:12,md:4,children:[(0,E.jsx)(l.Z,{variant:"h6",sx:{mb:1,fontWeight:"bold"},children:"Shipping Information"}),(0,E.jsxs)(d.Z,{elevation:0,sx:{boxShadow:{xs:0,md:5},p:{xs:0,md:2}},children:[(0,E.jsxs)(x.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{width:"100%"},children:[(0,E.jsx)(l.Z,{variant:"button",children:"Payment Method :"}),(0,E.jsx)("b",{children:null===Y||void 0===Y||null===(t=Y.data)||void 0===t||null===(g=t.data)||void 0===g?void 0:g.paymentMethod})]}),(0,E.jsx)(v.Z,{sx:{my:2}}),(0,E.jsxs)(x.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{width:"100%"},children:[(0,E.jsx)(l.Z,{variant:"button",children:"Receiver Name :"}),(0,E.jsx)("b",{children:(null===Y||void 0===Y||null===(b=Y.data)||void 0===b||null===(y=b.data)||void 0===y||null===(w=y.shipping)||void 0===w?void 0:w.name)||"-"})]}),(0,E.jsxs)(x.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{width:"100%"},children:[(0,E.jsx)(l.Z,{variant:"button",children:"Receiver Phone Number :"}),(0,E.jsx)("b",{children:(null===Y||void 0===Y||null===(P=Y.data)||void 0===P||null===(C=P.data)||void 0===C||null===(A=C.shipping)||void 0===A?void 0:A.phone)||"-"})]}),(0,E.jsxs)(x.Z,{direction:{xs:"row",md:"column"},alignItems:{xs:"center",md:"flex-start"},justifyContent:"space-between",sx:{width:"100%"},children:[(0,E.jsx)(l.Z,{variant:"button",children:"Shipping Address :"}),(0,E.jsx)("b",{children:(null===Y||void 0===Y||null===(S=Y.data)||void 0===S||null===(k=S.data)||void 0===k||null===(D=k.shipping)||void 0===D?void 0:D.address)||"-"})]})]}),(0,E.jsx)(l.Z,{variant:"h6",sx:{mt:3,mb:1,fontWeight:"bold"},children:"Additional Information"}),(0,E.jsxs)(d.Z,{elevation:0,sx:{p:{xs:0,md:2}},children:[(0,E.jsxs)(x.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{width:"100%"},children:[(0,E.jsx)(l.Z,{variant:"button",children:"Subtotal :"}),(0,E.jsxs)(l.Z,{children:[(null===Y||void 0===Y||null===(W=Y.data)||void 0===W||null===(I=W.data)||void 0===I?void 0:I.totalSellPrice)||0," \u09f3"]})]}),(0,E.jsxs)(x.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{width:"100%"},children:[(0,E.jsx)(l.Z,{variant:"button",children:"Delivery Fee :"}),(0,E.jsxs)(l.Z,{children:[(null===Y||void 0===Y||null===(_=Y.data)||void 0===_||null===(F=_.data)||void 0===F?void 0:F.shippingFee)||0," \u09f3"]})]}),(0,E.jsxs)(x.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{width:"100%"},children:[(0,E.jsx)(l.Z,{variant:"button",children:"Discount :"}),(0,E.jsxs)(l.Z,{children:["- ",(null===Y||void 0===Y||null===(Q=Y.data)||void 0===Q||null===(G=Q.data)||void 0===G?void 0:G.discount)||0," \u09f3"]})]}),(0,E.jsx)(v.Z,{sx:{my:1}}),(0,E.jsxs)(x.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{width:"100%",mb:2},children:[(0,E.jsx)(l.Z,{variant:"button",children:(0,E.jsx)("b",{children:"total :"})}),(0,E.jsxs)(l.Z,{children:[(0,E.jsx)("b",{children:(null===Y||void 0===Y||null===(M=Y.data)||void 0===M||null===(q=M.data)||void 0===q?void 0:q.total)||0})," \u09f3"]})]})]})]})]})]})})})}},371:function(e,n,t){t.d(n,{QE:function(){return a},UD:function(){return s},uy:function(){return x},v8:function(){return l},wS:function(){return u}});var i=t(56),r=t(7347),l=function(e){return(0,i.useQuery)(["get-all-order-for-user",e],(function(){return function(e){return r.ZP.get("order/user?".concat(e.method&&"all"!==e.method?"status=".concat(e.method,"&"):"","limit=").concat(e.limit,"&page=").concat(e.page))}(e)}),{})},d=function(e){return r.ZP.post("order/calculate",e)},s=function(){var e=(0,i.useQueryClient)();return(0,i.useMutation)(d,{onSuccess:function(){return e.invalidateQueries("get-order-calculate")}})},o=function(e){return r.ZP.post("order/create",e)},a=function(){var e=(0,i.useQueryClient)();return(0,i.useMutation)(o,{onSuccess:function(){e.invalidateQueries("get-cart-by-user")}})},c=function(){return r.ZP.get("order/calculate")},u=function(){return(0,i.useQuery)(["get-order-calculate"],c,{retry:1})},x=function(e){return(0,i.useQuery)(["get-products-by-order-id",e],(function(){return function(e){return r.ZP.get("order/".concat(e))}(e)}),{})}}}]);